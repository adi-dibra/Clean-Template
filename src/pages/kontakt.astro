---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Kontakta Oss - NG STHLM AB">
  <!-- Hero Section -->
  <section class="relative py-20 bg-secondary text-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl" data-aos="fade-up">
        <h1 class="text-5xl font-bold mb-6">Kontakta Oss</h1>
        <p class="text-xl text-gray-300">
          Diskutera ditt byggprojekt med vårt expertteam
        </p>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="py-20">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-2 gap-12">
        <!-- Contact Form -->
        <div class="bg-white p-8 rounded-lg shadow-lg" data-aos="fade-right">
          <h2 class="text-2xl font-bold text-secondary mb-6">Skicka ett Meddelande</h2>
          <form id="contactForm" class="space-y-6">
            <input type="hidden" name="access_key" value="4a7bf38d-a69e-4b5a-9f6f-6f699e31e9f1">
            <input type="hidden" name="subject" value="Ny kontaktförfrågan från NG STHLM webbplats">
            <input type="hidden" name="from_name" value="NG STHLM Webbformulär">
            <input type="checkbox" name="botcheck" class="hidden" style="display: none;">
            
            <div>
              <label for="name" class="block text-gray-700 mb-2">Namn</label>
              <input
                type="text"
                id="name"
                name="name"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                required
              />
            </div>
            <div>
              <label for="email" class="block text-gray-700 mb-2">E-postadress</label>
              <input
                type="email"
                id="email"
                name="email"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                required
              />
            </div>
            <div>
              <label for="phone" class="block text-gray-700 mb-2">Telefonnummer</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
              />
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label for="postalCode" class="block text-gray-700 mb-2">Postnummer</label>
                <input
                  type="text"
                  id="postalCode"
                  name="postalCode"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                  pattern="[0-9]{3}\s?[0-9]{2}"
                  placeholder="123 45"
                />
              </div>
              <div>
                <label for="city" class="block text-gray-700 mb-2">Ort</label>
                <input
                  type="text"
                  id="city"
                  name="city"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                />
              </div>
            </div>
            <div>
              <label for="service" class="block text-gray-700 mb-2">Tjänsteintresse</label>
              <select
                id="service"
                name="service"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
              >
                <option value="">Välj en tjänst</option>
                <option value="commercial">Kommersiellt Byggande</option>
                <option value="residential">Bostadsbyggande</option>
                <option value="renovation">Renovering & Ombyggnad</option>
              </select>
            </div>
            <div>
              <label for="message" class="block text-gray-700 mb-2">Meddelande</label>
              <textarea
                id="message"
                name="message"
                rows="4"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                required
              ></textarea>
            </div>
            <button
              type="submit"
              class="w-full bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-colors"
            >
              Skicka Meddelande
            </button>
          </form>
        </div>

        <!-- Contact Information -->
        <div data-aos="fade-left">
          <div class="bg-gray-50 p-8 rounded-lg shadow-lg mb-8">
            <h3 class="text-xl font-bold text-secondary mb-4">Kontaktinformation</h3>
            <div class="space-y-4 text-gray-600">
              <p class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-3 text-primary">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                </svg>
                <a href="mailto:kontakt@foretag.se">kontakt@foretag.se</a>
              </p>
              <p class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-3 text-primary">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
                <a href="tel:0812345678">08-123 45 67</a>
              </p>
            </div>
          </div>

          <div class="bg-gray-50 p-8 rounded-lg shadow-lg">
            <h3 class="text-xl font-bold text-secondary mb-4">Öppettider</h3>
            <div class="space-y-2 text-gray-600">
              <p>Måndag - Fredag: 08:00 - 16:00</p>
              <p>Lördag - Söndag: Stängt</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  import Swal from 'sweetalert2';

  const form = document.getElementById('contactForm');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form as HTMLFormElement);
    const object = Object.fromEntries(formData);
    const json = JSON.stringify(object);

    try {
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: json
      });
      
      const result = await response.json();
      
      if (response.status === 200) {
        Swal.fire({
          title: 'Tack för ditt meddelande!',
          text: 'Vi återkommer till dig så snart som möjligt.',
          icon: 'success',
          confirmButtonColor: '#C8A97E'
        });
        (form as HTMLFormElement).reset();
      } else {
        throw new Error(result.message);
      }
    } catch (error) {
      Swal.fire({
        title: 'Något gick fel!',
        text: 'Försök igen eller kontakta oss via telefon.',
        icon: 'error',
        confirmButtonColor: '#C8A97E'
      });
    }
  });
</script>